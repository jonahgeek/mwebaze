{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _highlight = _interopRequireDefault(require(\"./highlight\"));\n\nvar _default = function _default(options) {\n  var loader = options.loader,\n      isLanguageRegistered = options.isLanguageRegistered,\n      registerLanguage = options.registerLanguage,\n      languageLoaders = options.languageLoaders,\n      noAsyncLoadingLanguages = options.noAsyncLoadingLanguages;\n\n  var ReactAsyncHighlighter = /*#__PURE__*/function (_React$PureComponent) {\n    (0, _inherits2.default)(ReactAsyncHighlighter, _React$PureComponent);\n\n    function ReactAsyncHighlighter() {\n      (0, _classCallCheck2.default)(this, ReactAsyncHighlighter);\n      return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(ReactAsyncHighlighter).apply(this, arguments));\n    }\n\n    (0, _createClass2.default)(ReactAsyncHighlighter, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate() {\n        if (!ReactAsyncHighlighter.isRegistered(this.props.language) && languageLoaders) {\n          this.loadLanguage();\n        }\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this = this;\n\n        if (!ReactAsyncHighlighter.astGeneratorPromise) {\n          ReactAsyncHighlighter.loadAstGenerator();\n        }\n\n        if (!ReactAsyncHighlighter.astGenerator) {\n          ReactAsyncHighlighter.astGeneratorPromise.then(function () {\n            _this.forceUpdate();\n          });\n        }\n\n        if (!ReactAsyncHighlighter.isRegistered(this.props.language) && languageLoaders) {\n          this.loadLanguage();\n        }\n      }\n    }, {\n      key: \"loadLanguage\",\n      value: function loadLanguage() {\n        var _this2 = this;\n\n        var language = this.props.language;\n\n        if (language === 'text') {\n          return;\n        }\n\n        ReactAsyncHighlighter.loadLanguage(language).then(function () {\n          _this2.forceUpdate();\n        });\n      }\n    }, {\n      key: \"normalizeLanguage\",\n      value: function normalizeLanguage(language) {\n        return ReactAsyncHighlighter.isSupportedLanguage(language) ? language : 'text';\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return _react.default.createElement(ReactAsyncHighlighter.highlightInstance, (0, _extends2.default)({}, this.props, {\n          language: this.normalizeLanguage(this.props.language),\n          astGenerator: ReactAsyncHighlighter.astGenerator\n        }));\n      }\n    }], [{\n      key: \"preload\",\n      value: function preload() {\n        return ReactAsyncHighlighter.loadAstGenerator();\n      }\n    }, {\n      key: \"loadLanguage\",\n      value: function () {\n        var _loadLanguage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(language) {\n          var languageLoader;\n          return _regenerator.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  languageLoader = languageLoaders[language];\n\n                  if (!(typeof languageLoader === 'function')) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\", languageLoader(ReactAsyncHighlighter.registerLanguage));\n\n                case 5:\n                  throw new Error(\"Language \".concat(language, \" not supported\"));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function loadLanguage(_x) {\n          return _loadLanguage.apply(this, arguments);\n        };\n      }()\n    }, {\n      key: \"isSupportedLanguage\",\n      value: function isSupportedLanguage(language) {\n        return ReactAsyncHighlighter.isRegistered(language) || typeof languageLoaders[language] === 'function';\n      }\n    }, {\n      key: \"loadAstGenerator\",\n      value: function loadAstGenerator() {\n        ReactAsyncHighlighter.astGeneratorPromise = loader().then(function (astGenerator) {\n          ReactAsyncHighlighter.astGenerator = astGenerator;\n\n          if (registerLanguage) {\n            ReactAsyncHighlighter.languages.forEach(function (language, name) {\n              return registerLanguage(astGenerator, name, language);\n            });\n          }\n        });\n        return ReactAsyncHighlighter.astGeneratorPromise;\n      }\n    }]);\n    return ReactAsyncHighlighter;\n  }(_react.default.PureComponent);\n\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"astGenerator\", null);\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"highlightInstance\", (0, _highlight.default)(null, {}));\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"astGeneratorPromise\", null);\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"languages\", new Map());\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"supportedLanguages\", options.supportedLanguages || Object.keys(languageLoaders || {}));\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"isRegistered\", function (language) {\n    if (noAsyncLoadingLanguages) {\n      return true;\n    }\n\n    if (!registerLanguage) {\n      throw new Error(\"Current syntax highlighter doesn't support registration of languages\");\n    }\n\n    if (!ReactAsyncHighlighter.astGenerator) {\n      // Ast generator not available yet, but language will be registered once it is.\n      return ReactAsyncHighlighter.languages.has(language);\n    }\n\n    return isLanguageRegistered(ReactAsyncHighlighter.astGenerator, language);\n  });\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"registerLanguage\", function (name, language) {\n    if (!registerLanguage) {\n      throw new Error(\"Current syntax highlighter doesn't support registration of languages\");\n    }\n\n    if (ReactAsyncHighlighter.astGenerator) {\n      return registerLanguage(ReactAsyncHighlighter.astGenerator, name, language);\n    } else {\n      ReactAsyncHighlighter.languages.set(name, language);\n    }\n  });\n  return ReactAsyncHighlighter;\n};\n\nexports.default = _default;","map":{"version":3,"sources":["/home/jonathan/Projects/mwebaze/node_modules/react-syntax-highlighter/dist/cjs/async-syntax-highlighter.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_regenerator","_asyncToGenerator2","_extends2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_defineProperty2","_react","_highlight","_default","options","loader","isLanguageRegistered","registerLanguage","languageLoaders","noAsyncLoadingLanguages","ReactAsyncHighlighter","_React$PureComponent","apply","arguments","key","componentDidUpdate","isRegistered","props","language","loadLanguage","componentDidMount","_this","astGeneratorPromise","loadAstGenerator","astGenerator","then","forceUpdate","_this2","normalizeLanguage","isSupportedLanguage","render","createElement","highlightInstance","preload","_loadLanguage","mark","_callee","languageLoader","wrap","_callee$","_context","prev","next","abrupt","Error","concat","stop","_x","languages","forEach","name","PureComponent","Map","supportedLanguages","keys","has","set"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _highlight = _interopRequireDefault(require(\"./highlight\"));\n\nvar _default = function _default(options) {\n  var loader = options.loader,\n      isLanguageRegistered = options.isLanguageRegistered,\n      registerLanguage = options.registerLanguage,\n      languageLoaders = options.languageLoaders,\n      noAsyncLoadingLanguages = options.noAsyncLoadingLanguages;\n\n  var ReactAsyncHighlighter =\n  /*#__PURE__*/\n  function (_React$PureComponent) {\n    (0, _inherits2.default)(ReactAsyncHighlighter, _React$PureComponent);\n\n    function ReactAsyncHighlighter() {\n      (0, _classCallCheck2.default)(this, ReactAsyncHighlighter);\n      return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(ReactAsyncHighlighter).apply(this, arguments));\n    }\n\n    (0, _createClass2.default)(ReactAsyncHighlighter, [{\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate() {\n        if (!ReactAsyncHighlighter.isRegistered(this.props.language) && languageLoaders) {\n          this.loadLanguage();\n        }\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this = this;\n\n        if (!ReactAsyncHighlighter.astGeneratorPromise) {\n          ReactAsyncHighlighter.loadAstGenerator();\n        }\n\n        if (!ReactAsyncHighlighter.astGenerator) {\n          ReactAsyncHighlighter.astGeneratorPromise.then(function () {\n            _this.forceUpdate();\n          });\n        }\n\n        if (!ReactAsyncHighlighter.isRegistered(this.props.language) && languageLoaders) {\n          this.loadLanguage();\n        }\n      }\n    }, {\n      key: \"loadLanguage\",\n      value: function loadLanguage() {\n        var _this2 = this;\n\n        var language = this.props.language;\n\n        if (language === 'text') {\n          return;\n        }\n\n        ReactAsyncHighlighter.loadLanguage(language).then(function () {\n          _this2.forceUpdate();\n        });\n      }\n    }, {\n      key: \"normalizeLanguage\",\n      value: function normalizeLanguage(language) {\n        return ReactAsyncHighlighter.isSupportedLanguage(language) ? language : 'text';\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return _react.default.createElement(ReactAsyncHighlighter.highlightInstance, (0, _extends2.default)({}, this.props, {\n          language: this.normalizeLanguage(this.props.language),\n          astGenerator: ReactAsyncHighlighter.astGenerator\n        }));\n      }\n    }], [{\n      key: \"preload\",\n      value: function preload() {\n        return ReactAsyncHighlighter.loadAstGenerator();\n      }\n    }, {\n      key: \"loadLanguage\",\n      value: function () {\n        var _loadLanguage = (0, _asyncToGenerator2.default)(\n        /*#__PURE__*/\n        _regenerator.default.mark(function _callee(language) {\n          var languageLoader;\n          return _regenerator.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  languageLoader = languageLoaders[language];\n\n                  if (!(typeof languageLoader === 'function')) {\n                    _context.next = 5;\n                    break;\n                  }\n\n                  return _context.abrupt(\"return\", languageLoader(ReactAsyncHighlighter.registerLanguage));\n\n                case 5:\n                  throw new Error(\"Language \".concat(language, \" not supported\"));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function loadLanguage(_x) {\n          return _loadLanguage.apply(this, arguments);\n        };\n      }()\n    }, {\n      key: \"isSupportedLanguage\",\n      value: function isSupportedLanguage(language) {\n        return ReactAsyncHighlighter.isRegistered(language) || typeof languageLoaders[language] === 'function';\n      }\n    }, {\n      key: \"loadAstGenerator\",\n      value: function loadAstGenerator() {\n        ReactAsyncHighlighter.astGeneratorPromise = loader().then(function (astGenerator) {\n          ReactAsyncHighlighter.astGenerator = astGenerator;\n\n          if (registerLanguage) {\n            ReactAsyncHighlighter.languages.forEach(function (language, name) {\n              return registerLanguage(astGenerator, name, language);\n            });\n          }\n        });\n        return ReactAsyncHighlighter.astGeneratorPromise;\n      }\n    }]);\n    return ReactAsyncHighlighter;\n  }(_react.default.PureComponent);\n\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"astGenerator\", null);\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"highlightInstance\", (0, _highlight.default)(null, {}));\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"astGeneratorPromise\", null);\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"languages\", new Map());\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"supportedLanguages\", options.supportedLanguages || Object.keys(languageLoaders || {}));\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"isRegistered\", function (language) {\n    if (noAsyncLoadingLanguages) {\n      return true;\n    }\n\n    if (!registerLanguage) {\n      throw new Error(\"Current syntax highlighter doesn't support registration of languages\");\n    }\n\n    if (!ReactAsyncHighlighter.astGenerator) {\n      // Ast generator not available yet, but language will be registered once it is.\n      return ReactAsyncHighlighter.languages.has(language);\n    }\n\n    return isLanguageRegistered(ReactAsyncHighlighter.astGenerator, language);\n  });\n  (0, _defineProperty2.default)(ReactAsyncHighlighter, \"registerLanguage\", function (name, language) {\n    if (!registerLanguage) {\n      throw new Error(\"Current syntax highlighter doesn't support registration of languages\");\n    }\n\n    if (ReactAsyncHighlighter.astGenerator) {\n      return registerLanguage(ReactAsyncHighlighter.astGenerator, name, language);\n    } else {\n      ReactAsyncHighlighter.languages.set(name, language);\n    }\n  });\n  return ReactAsyncHighlighter;\n};\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}